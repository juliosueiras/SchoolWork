<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>File Streams</title>
<script type="text/javascript" src="scripts/header.js"></script>
<link rel="stylesheet" type="text/css" href="css/prog.css">

<script type="text/javascript">
<!--
//-->
</script>

</head>

<body onload='window.focus()'>

<h2>File Streams</h2>

<h3>Topics Covered:</h3>

<ul class="outer">
	<li><a href="#file">Data Files</a>
	<li><a href="#streams">File Stream Objects</a>
	<li><a href="#class">The File Class</a>
</ul>

<h3>Things To Do Before Reading This Section:</h3>
<ul class="outer">
	<li>Read Chapter 9.6 in your textbook.
	<li>Try questions 9.21 to 9.23 on page 334-5
            of your textbook.
</ul>

<h3>Things To Do After Reading This Section</h3>
<ul class="outer">
	<li>Do any homework assigned by your professor.
</ul>

<a name="file"><h3>Data Files</h3></a>

<p>Data files are used in programs to store data that can be accessed
at a later time.  For example, a program that calculates the area of
various shapes might use a data file that stores all the shape forumlae
for the various shapes.  Another program might calculate and print
employee paychecks, so it might require the use of an employee file in
order to retrieve data about employees.  If you wrote a program to keep
track of your movie collection, you would need a file so you could save
movie information; you could also use the file to retrieve information
about your collection for reports and searches.</p>

<p>Most data files will store <b>records</b>.  A record describes one
item of an entity.  For example, in your movie program, the movie file
would consist of a set of records, and each record would describe one
movie in your collection.  A student file would contain records, where
each record would describe one student.</p>

<p>As a programmer, it is important to note that a file could contain
any number of records, even no records at all!  You are responsible for
ensuring that your program works and is user-friendly, regardless of the
number of records in the data file.</p>

<p>Each record is made up of a set of <b>fields</b>.  A field describes
one particular piece of information about the item that is stored in a
record.  For example, in a student record, you would have fields such
as student id, first name, last name, program code, address, and phone
number.</p>

<p>When you are designing a data file to hold data, you will need to
determine the fields that each record will have.  It is important to
understand that every single record in a particular file will have
the exact same fields (of course, each record's field values will
probably be different!).  For example, each record in the student
file will have a student id field, a first name field, a last name
field, a program code field, etc.  A file description table is helpful
in determining the structure of a particular file:</p>

<table border=1><tr><td colspan=3><b>File Name:</b> students.dat</td></tr>
<tr><th>Field Description</th><th>Data Type</th><th>Comments</th></tr>
<tr><td>student id</td><td>long integer</td><td>must be exactly 9 digits</td></tr>
<tr><td>first name</td><td>string/text</td><td>&nbsp</td></tr>
<tr><td>last name</td><td>string/text</td><td>&nbsp</td><tr>
<tr><td>program code</td><td>string/text</td><td>must be 4 to 5 characters</td></tr>
</table>

<p>The data for this file might be stored as:</p>

<pre>123456789, Fred, Flintstone, PITPI
987654321, Kaluha, Jollymore, PCOMP
222333444, Jen, MacDonald, PITSS</pre>

<p>In this example, each of the three records consists of the student
id field, the first name, the last name, and the program code.  Also,
each field is <b>delimited</b> by a comma-space combination of
characters.  We talk about
<a href="http://www-acad.sheridanc.on.ca/~jollymor/prog24178/files2_08.html">delimited files</a>
in the next section.</p>

<p>Some file descriptions also have a column for the field size.  This
is common with <b>random access files</b> (Chapter 19.7) because with
a random access file (or simply referred to as a <b>random file</b>)
each field has a pre-defined length.  We call these <b>fixed-width
fields</b>.  Because each field has a fixed size, that means that each
record also has a fixed size.</p>


<p>Another kind of file, a <b>sequential file</b> has <b>variable-length
fields</b>.  In this case, a field takes up as much space as it needs
to store its value.  So a first name field of "Fred" takes up less
space than a first name field with a value of "Beethoven".  We'll work
with sequential files first, and later learn about random files.</p>

<div class="puzzle"><b>The PRIMARY KEY field:</b>  A primary key field is
vital when designing a file structure or database table.  Each record
needs to have a field that makes it unique from all other records.
For example, in a student file, you'd use the student id field, since
no two students have the same student id.  If you were tracking book
information, you'd use the ISBN (International Standard Book Number),
because no two books have the same ISBN.  <br /> <br />
A primary key doesn't have to be a single field; many times a primary
key is a combination of more than one field.  For example, say you were
keeping a file of your blog entries with fields for the date and time
you wrote and the content of your entry.  One way of identifying each
entry in a unique way is to combine the date and time fields as one
primary key, since you could never write two entries at the exact
same time on the same day.<br /> <br />
What if you were keeping track
of your contact list of friends, family, and colleagues?  What would be
the unique identifier?  You might want to choose a combination of first
and last name, but this is not really unique:  what if your sister-in-law's
name was Sara Smith, and she had a child who is also called
Sara Smith?  The entries for these two people are not unique, so you'd have
to come up with something else.  In many cases like this, we just make up
an "id" field for each entry.  Many database applications allow you to use
an "autonumber" for such fields: each new record's id field gets a new
number in sequence starting with 1, then 2, then 3, etc.  When working
with a plain text file, you'll have to come up with your own numbering
scheme for id fields that you create.</div>


<h4>Exercise</h4>

<p>With a partner or the group at your table, design a file description
    for a file that keeps track of the episodes you've downloaded of
    your favourite TV show.  What fields would you need?  What type
of data would each field be?  Create a chart like the example shown above.</p>

<a name="streams"><h3>File Stream Objects</h3></a>

<p>In Java, data travels in and out of a program using <b>streams</b>.
There are various types of streams you can use, depending on the kind
of data you're working with, the data's source or destination, and a
few other factors.  For example, byte streams work with raw binary data,
and character streams work with textual data.  File streams allow data
to travel to or from a file, and a buffered stream is used for data
that is stored or buffered in memory.  Input streams bring data into
a program from a source, and output streams send data from the program
to some destination (such as a file or monitor).</p>

<p>In this section, we will focus on streams that allow you to read and
write data to and from files.  Luckily, we can use two classes that
you're already familiar with:  PrintWriter and Scanner.  PrintWriter
(which is the class that contains the methods print(), println(), and
printf()) will be used to write data to a file, and Scanner will be
used to read data from a file.</p>

<!--<p>After reading Chapter 12.1 and 12.9, you should be familiar with the following terms and concepts:</p>

<ul class="outer">
	<li>Terms:
	<ul class="inner">
		<li>data file, program files, external file name
		<li>the Fair Credit Reporting Act and the Federal Privacy Act (USA)
		<li>file stream, input stream, output stream (Fig. 12.1)
		<li>character streams, character files, text files
		<li>binary streams, byte streams, byte-based files
		<li>buffering (p. 623)
	</ul>
	<li>Concepts:
	<ul class="inner">
		<li>proper naming conventions for a data file
		<li>binary vs. character streams, input vs. output streams
		<li>classes used for file I/O:  FileWriter, FileReader, FileInputStream, FileOutputStream
		<li>how to create input and output file streams
		<li>how to close a stream and why we need to do this
	</ul>
</ul>
-->

<!--
<h4>Exercise</h4>

<p>Write a program that performs the following tasks:</p>
<ol>
	<li>Create an output stream to a file called ex1.txt.
	<li>Use the write() method to write the characters of your name to the file.
	<li>Close the stream.
</ol>

<p>Compile and run the program.  Then check the program's folder and locate the ex1.txt file.  Open this file in Editplus.  What does your file contain?</p>

<p>Now, write a different program that opens an input stream from the ex1.txt file and reads in the characters.  Display each character on the console.  Don't forget to close the stream when you're finished.</p>

<p>What happens if you try to read a character too many times?</p>
-->

<a name="class"><h3>The File Class</h3></a>

<p>Chapter 9.6 introduces a class called File that is part of the
java.io package.  This class models a file on a storage device.  You
might often want to create a File object for a particular file when you
want to check the properties of the file.  For example, you can check
to see if the file exists, you can delete the file, check the location
of the file, or you can see the size of the file.</p>

<p>In reading Chapter 9.6, you should become familiar with the
following:</p>

<ul class="outer">
<li>the list of constructors and methods in Figure 9.15 on page 323
(see also code listing 9.6 on page 324).
<li>how to write code that checks for the existence of a file 
<li>how to delete and rename a file
<li>how to check and see if a file is a directory or not
<li>the difference between getPath(), getCanonicalPath(), and
getAbsolutePath()
</ul>
<p>Note also the errors for Chapter 9.6 listed in the
    <a href="http://www.cs.armstrong.edu/liang/intro8e/errata.html">errata</a>.</p>

<h4>File Paths</h4>

<p>It's important to understand relative and absolute paths when working
    with any kind of file system.  A <b>relative path</b> is the path of
    a file or directory in relationship to another path or file
    (often, with the directory you're currently in).  An <b>absolute path</b>
    is the complete name of a file or directory.</p>

<p>To understand, imagine a directory structure with the following
    directories and files:</p>

<p><img src="images/fileStructure.jpg" alt="sample file structure" /></p>

<p>In the sample image above, I have a Word directory off the root 
    directory of my D: drive.</p>
<p>In the Work directory there is one file (webctHeader.txt) and there are
    four sub-directories:  CourseOutlines, Courses,
    Events, and Meetings.  You can see that in the Events directory there are
    two more sub-directories:  orientation and presentations.</p>

<p>The root of a drive is always symbolized with the back-slash symbol (\) on
    a Windows system and a forward slash (/) on a Linux/Unix system.  In both
    systems, this is also the path separator (e.g. d:\work\courses - the \
    symbol separates the directory names "Work" and "Courses" in the path).</p>

<p>The current directory is always represented with a single dot (.) -- if
    you go into a command window and type "dir" to make a list of the current
    directory contents, you'll see the first item listed is ".", which
    represents the current directory you're in.</p>

<p>The .. symbols (two dots) is used to represent the directory above the
    current directory.  If, using the sample directory structure above, your
    current directory was "Events" and you wanted to refer to the "Work"
    directory, you'd use the relative path designation ".."   If you wanted
to refer to the "Courses" directory from inside "Events", you'd use 
"..\Courses" -- two dots to go back up one directory to the "Work" directory, 
then a path separator, then the sub-directory of Work that you want
to refer to (Courses).</p>

<p>You can use the same symbolism to go back up two directories.  For example,
    if I'm in "Events", I can refer to the root of D with "..\.." -- go up
    one level (to "Work"), then go up one level again, to the root of D.</p>

<p>Here's a very interesting example:  say in the "Courses" folder there's a file
    called "courseList.docx" that you want to access.  How would you refer to
    that file if you were inside D:\Work\Events?  Remember that you want to
    go back up one directory into Work, then inside Courses, then refer to the
    file name:  ..\Courses\courseList.docx</p>

<p><b>Absolute Path:</b>  An absolute path is complete path to a particular file or
    directory from your current directory, so if you're inside the "Events"
    folder and you want to refer to courseList.docx, the absolute path is:<br />
    D:\Work\Events\..\Courses\courseList.docx</p>

<p><b>Relative Path:</b> A relative path is an "abstract" path to a file from
    your current directory.  Using the same example as above, the relative path
    from "Events" to courseList.docx is<br />
    ..\Courses\courseList.docx</p>

<p><b>Canonical Path:</b> Java's File class also allows you to get the canonical
    path to a file.  A canonical path takes away any special symbols that are used
    in an absolute or relative path and creates a complete path to a particular file
    or directory.  A canonical path is the same for a file/directory no matter
    where you are in the file system.  So for the example used in the previous
    two paragraphs, the canonical path to courseList.docx will always be:<br />
    D:\Work\Courses\courseList.docx<br />
    ..no matter where you are in the system when you refer to that file.</p>

<p>The File class uses getAbsolutePath() and getCanonicalPath() to retrieve
    a file or directory's absolute or canonical path, and it uses getPath()
    to retrieve the relative path of the file or directory (if you used a
    relative path reference when you created the File object).</p>


<h4>Exercise</h4>

<p><b>1. </b> Answer questions 9.21 to 9.23 at the end of
Chapter 9 (page 334-5).</p>

<p><b>2. </b>Write a small console program that asks the user to enter
the name of any file.  If the file exists, display the length of the
file in bytes and its absolute path name.  If the file doesn't exist,
display a message "File does not exist."</p>

<script type="text/javascript" src="../scripts/copynote.js"></script>


</body>
</html>
