<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Object Arrays</title>
<script type="text/javascript" src="scripts/header.js"></script>
<link rel="stylesheet" type="text/css" href="css/prog.css">

<script type="text/javascript">
<!--
//-->
</script>

</head>

<body onload='window.focus()'>

<h2>Object Arrays</h2>

<h3>Topics Covered:</h3>

<ul class="outer">
	<li><a href="#obj">Arrays of Objects</a>
        <li><a href="#files">Arrays with Files</a>
</ul>

<h3>Things To Do Before Reading This Section:</h3>
<ul class="outer">
	<li>Review Chapter 6 in your textbook.
	<li>Have any homework ready for submission.
</ul>

<h3>Things To Do After Reading This Section</h3>
<ul class="outer">
	<li>Complete and/or submit any exercises assigned for homework.
</ul>


<a name="obj"><h3>Object Arrays</h3></a>

<p>If you've created an array of Strings, then you've already created
an array of objects!  You can store any kind of object you like in an
array  If you wanted, you could have an array of Rectangle objects,
Employee objects, or even TextBox objects (we'll make one when we do
Swing!).</p>

<p>For example, you can create an array of Circle objects.  You can
then iterate through the array of circles and display the radius and
area, if you wish.  </p>

<p>If you want to create an array with different shapes from our
package of shape classes, you can just create the array to be of type
Shape:</p>

<pre>Shape[] shapes = new Shape[5];</pre>

<p>The above statement works just like a regular array.  An object
variable called "shapes" is created, then storage is allocated for
5 shape objects.</p>

<p><b>NOTE:</b>  The above code statement <b>does not</b> construct the
Shape objects!  It only sets up 5 elements to hold those shapes that
will eventually be created.  You must use separate code statements
to construct or instantiate each object and reference it to an element
of the array.</p>

<p>Since a Shape variable can hold any child class of Shape (such as Circle,
Sphere, or Cylinder), then it makes sense that if an array is defined
to hold Shapes, each element can contain an object that is a child
of Shape.</p>

<p>Try this:</p>

<pre>Shape[] shapes = new Shape[5];
shapes[0] = new Circle(5);
shapes[1] = new Cylinder(5, 2);
shapes[2] = new Sphere(2);</pre>

<p>Now, write a loop that displays the array of shapes!</p>

<p>How would you modify the loop to display the area?  How would you modify
the loop to display the volume for ThreeD shapes?</p>

<a name="files"></a>
<h3>Arrays with Files</h3>

<p>When working with a sequential file, you'll find that
it's very difficult to edit existing records because each
record in the file is of a variable length.  You can't
change the data in a record and then replace the old record
because the new record might be longer or shorter than
the old one.  If longer, you overwrite the data in the next
record and if shorter, you're left with extra data at the
end of the edited record.</p>

<p>One solution to this problem is to use an array to hold
your file data.  You might think of using a set of parallel
arrays to contain each field value for each record but this
can get tedious.  Instead, create a class that models an
object/record.  For example, if I want to edit records in the
Grades file, I can create an Evaluation class:</p>

<table border="1" cellspacing="0" cellpadding="2">
    <tr><th>Class: Evaluation</th></tr>
    <tr><td><b>Attributes:</b><br />
        -courseCode: String<br />-evalTitle: String<br />
        -grade: double<br />-maxGrade: double<br />
        -weighting: double</td></tr>
    <tr><td><b>Methods:</b><br />
        +Evaluation()<br />
        +Evaluation(courseCode: String, title: String, grade:
        double, maxGrade: double, weight: double)<br />
        +getCourseCode(): String<br />+getEvalTitle(): String<br />
        +getGrade(): double<br />+getMaxGrade(): double<br />
        +getWeighting() : double<br >
        +setCourseCode(code: String): void<br />
        +setEvalTitle(title: String): void<br />
        +setGrade(grade: double): void<br />
        +setMaxGrade(max: double): void<br />
        +setWeighting(weight: double): void<br />
        +toString(): String</td></tr>
</table>

<p>I can then create an array to hold Evaluation objects:</p>

<pre>Evaluation[] evals = new Evaluation[numRecords];</pre>

<p>Obviously this assumes that I am going to have to go
through my file and count the number of records I need so
I can allocate the right amount of storage for my array.
This is a bit inefficient, and we can fix this problem in the
next session once we learn the ArrayList class.</p>

<p>After declaring my array, I can then read in each record
in my file and use each record to construct an Evaluation
object, which I then add to my array:</p>

<pre>for each record in the file:
    Grab a record
    Parse out the fields in the record
    Construct a new Evaluation object using the field values
    Handle any exceptions that come from the Evaluation object
    Add the evaluation object to the array
Close the connection to the file</pre>

<p>Once that segment has completed, you have an array full
of records!  You can now move from one record to another
by navigating through the array and keeping track of the
current index.  You can edit records by allowing the user
to type new values, then using those new values to construct
a new Evaluation object.  Then just replace the correct array
element with the new object.</p>

<p>Deleting records is still a bit cumbersome, but again we
can fix this once we learn how to use the ArrayList class
instead.</p>

<p>We also can't add records at this time without quite a bit
of code since we'd have to make a new, larger array and copy
all the elements over before adding a new element to the end.
We can solve this problem also using an ArrayList.</p>

<p>Note that the user is manipulating the data for your
grades file in the array and not the file itself.  This
makes your program much faster, but how do you manage
to keep the original file up to date?</p>

<p>When you exit the program, you'll need to write the code
to connect to the file WITHOUT the APPEND argument, then
take each Evaluation object from the array and write it as
a record to the file.  Basically, you're overwriting the
file with the array data, since the array data is now more
up-to-date than the old file.</p>

<pre>Connect to the file using an output stream that doesn't append
For each element in the array:
     Create a delimited record string out of the object's data members
     Write the record to the file
Close the output stream</pre>

<h4>Exercise</h4>

<p>Create a GUI that allows a user to navigate and edit records
from the grades file.  This is just for practice, since this
kind of application is actually easier to do with an ArrayList.
However, you'll be doing a program exactly like this one later
using the ArrayList class, so if you do this exercise now, you
can reuse some of the code with a few minor changes.</p>

<p>For this exercise, I've given you a few things to help
you out:</p>

<p><a href="files/arrayFile1.zip">Download this file</a>.
Unzip the file add the .java and .form files to a
new project.</p>

<p>The ZIP file consists of:</p>
<ul class="outer">
<li>GradesArrayList.java, GradesArrayList.form - the GUI for the program,
which should be added to a new project if you'd like to use it
(you don't have to, you can make your own GUI)
<li>eval-tools.jar - a JAR file containing the Evaluation.class
    file.  You can use this class for your Evaluation items that
    can go into the array/file. You will need to add this JAR
    to your library directory on your computer and then add
    it to your project's Libraries.
<li>/docs directory - docs for the Evaluation class;
    you'll need these to learn how to use Evaluation objects
    - I've added an extra method in there to help you so be sure
    to read them carefully!
</ul>

<p>The grades.dat data file is the same one you've been using
in other exercises in this course and has the following structure:</p>

<table border=1>
<tr><td colspan=4><b>File Name:</b> grades.dat</td></tr>
<tr><th>Field Description</th><th>Data Type</th><th>Comments</th><th>Example</th></tr>
<tr><td>course code</td><td>string/text</td><td>the unique course code</td><td>PROG24178</td></tr>
<tr><td>evaluation name</td><td>string/text</td><td>the assignment/test/quiz/etc. name</td><td>Mid Term Exam</td></tr>
<tr><td>actual grade</td><td>double</td><td>what you got on this evaluation</td><td>60</td></tr>
<tr><td>maximum grade</td><td>double</td><td>what the evaluatoin was out of</td><td>65</td></tr>
<tr><td>weighting</td><td>double</td><td>how of your final grade is this evaluation worth (percent)?</td><td>35</td></tr>
</table>

<p>Records are delimited with the new-line character.
Fields are delimited with the pipe | symbol.</p>

<p><b>How do add the existing GUI to a project:</b></p>

<p><ol>
    <li>Create a brand new Java project.  You don't need the Main class but if you
        leave that off, you'll have to add a new package once your empty project
        loads.</li>
    <li>Using a file manager of your choice, select and copy the .form and .java file I've given
        you.</li>
    <li>Paste the two files into your src folder in the proper directory
        of your project.  For example, if your package is called
    "prog24178.gradesapp", go into the project's root directory, then go into the "src"
    directory.  You'll see a "prog24178" directory and in there, a "gradesapp" directory.
    That's where you paste your files.</li>
    <li>Go back to the Project window in Netbeans.  If you see the files in the correct
    package, it worked.  If not, try collapsing then expanding the package and project
    nodes.  If you see errors, just update the package statement inside the
    GUI's source code.</li>
</ol></p>

<p><b>Program Functionality:</b></p>

<p>Program Start:</p>

<p>In the constructor, you'll need to open the data file and load all
of the records into the array (which should be declared as a private data
member).  Read a record, create an Evaluation object with the data from
the record, then add this Evaluation object to the array.  Do this for each
record in the file.  Make sure you've read the docs for the Evaluation
class so you know how the constructors and methods work.</p>

<p>When the program first loads, the user can navigate records in the array
    using the Next and Prev buttons.
    They can also choose to Edit the current record showing.
The Save button should be disabled on startup, since they can't Save until they
have edited first.</p>
<p>Also, the text fields should be locked to data entry (unless the user has
    clicked Edit, see below).  You can set the text fields' Editable property
    in form design mode to false (unchecked) so that they are locked when
    the program starts.</p>

<p>Next/Prev Buttons:</p>

<p>Next takes the user to the next record in the array.  If the user is
already on the last record, nothing happens when they click Next.</p>

<p>Prev takes the user to the previous record in the array.  If the user
    is on the first record, nothing happens when they click Prev.</p>

<p>Edit unlocks the text fields ( setEditable(true) ) so that the current
    data can be edited.
While the user is editing, you should make sure they can't press the Next,
Prev, or Exit buttons or else they might lose their changes!  Similarly,
when Edit is clicked, they should not be able to press Edit again, so these
buttons should be disabled.  Only the Save and Exit buttons should be
enabled while in Edit mode.</p>
<p>Bonus:  Most programs include a Cancel button that cancels the edit
operation!</p>

<p>Save Button:</p>

<p>This button is only available when in Edit mode.  In this case, the Save
button validates the data in the text fields and, if the data is valid,
creates a delimited record and replaces the old Evaluation object
array element with the newly edited array element.  The easiest way to do
this is to pass the text field data to the Evaluation constructor to create
a new Evaluation object, catch any exceptions that might be thrown and
give the user some useful feedback about their mistakes.  If no errors
occur, the data is valid and the Evaluation object can be put into the
array list in the same index position as the original.</p>

<p>You can see that almost all of these functions require that you keep track
of your array index (record number).  You'll want to create a private data
member for this!</p>

<p>Other hints and information will be given to you during the class time
alloted for this exercise.</p>


<!--
<p>Bring up your TFQuestion class that you wrote in the Review
exercises in the Course Introduction Module.  To create an array of
TFQuestion objects, you would use a statement such as:</p>

<pre>TFQuestion[] questions = new TFQuestion[5];</pre>

<p>This creates the object variable "questions", which is pointing to
an array object that is ready to hold TFQuestion objects.  Remember,
at this point, there are no TFQuestion objects; we've only created the
empty array object (see Figure 8.8b).</p>

<p>The next step is to create each TFQuestion object to go into the
array.  We can do this by writing a loop:</p>

<pre>For each array element
     Create a TFQuestion object
     Add this object to the array</pre>

<p>What problem do you see with this?  What do you need to create each
question?  You need the id, the question text, and the answer.  Since
each of the three values will be different for each of the 5 objects,
this makes the loop difficult.  We can use one of the following
solutions:</p>

<ul class="outer">
<li>Read the question data from a text file, so that in our loop we
simply read a record, and pass each field in the TFQuestion constructor.  We will learn how to do this when we do the File Processing module.
<li>Hard-code three parallel arrays - one for the ids, one for the
question texts, and one for the answers.  For a small array, this
is fine, but still a bit cumbersome.  Unthinkable for a large array.
<li>In the loop, prompt the user to enter the data to be passed
into the constructor.  Just for fun, let's try it this way:
</ul>

<pre>for (int i=0; i&lt;questions.length; i++) {
     int id = Integer.parseInt(JOptionPane.showInputDialog(null,
		"Enter question id: ", "Question Id", 
		JOptionPane.QUESTION_MESSAGE));
     String text = JOptionPane.showInputDialog(null,
		"Enter question text: ", "Question Text", 
		JOptionPane.QUESTION_MESSAGE);
     int intAnswer = JOptionPane.showConfirmDialog(null,
		"Is this question TRUE? (Click No if its FALSE)",
		"Answer", JOptionPane.QUESTION_MESSAGE);
     boolean answer = (i == JOptionPane.YES_OPTION);
     questions[i] = new TFQuestion(id, text, answer);
}</pre>

<p>That's it!  Obviously we would need to worry about exception
handling for the constructor and for the readLine() method, but
that shouldn't be difficult for you to figure out.</p>

<h4>Exercise</h4>

<p>Once the array is filled with questions, display them on the
screen and prompt the user to answer each - display an appropriate
message if the ansewr is correct or incorrect.  After all the
questions have been given to the user, display the number of
correct answers out of 5, and the percentage.</p>
 -->
 
<script type="text/javascript" src="../scripts/copynote.js"></script>

</body>
</html>
